# Q0 Visualization Plan: Data Pipeline & Audit Flowcharts

**Goal**: provide paper-ready, reproducible diagrams for the Q0 data pipeline (wide CSV → canonical processed datasets) and the associated sanity/audit outputs.

## ✅ Mainline scope constraints (must hold for paper-body figures)

- **Mainline figures/diagrams** must be reproducible from:
  - `mcm2026c/2026_MCM_Problem_C_Data.csv`
  - `data/processed/*.csv`
  - `outputs/tables/*.csv`
- `outputs/tables/showcase/*` is **appendix-only** and must not be used as mainline evidence.

---

## Mainline diagrams (paper-ready)

### Fig 0-1: End-to-end pipeline (Q0 → Q4)

```mermaid
flowchart TD
  A[Official data
mcm2026c/2026_MCM_Problem_C_Data.csv] --> B[Q0 build weekly panel
mcm2026c_q0_build_weekly_panel]

  B --> C1[data/processed/dwts_weekly_panel.csv]
  B --> C2[data/processed/dwts_season_features.csv]

  C1 --> D1[Q1 fan vote inference
mcm2026c_q1_smc_fan_vote]
  C1 --> D2[Q2 counterfactual simulation
mcm2026c_q2_counterfactual_simulation]
  C2 --> D3[Q3 impact analysis
mcm2026c_q3_mixed_effects_impacts]
  C1 --> D4[Q4 design space evaluation
mcm2026c_q4_design_space_eval]

  D1 --> O1[outputs/predictions/
...q1_fan_vote_posterior_summary.csv]
  D1 --> T1[outputs/tables/
...q1_uncertainty_summary.csv]

  D2 --> T2[outputs/tables/
...q2_mechanism_comparison.csv]

  D3 --> T3[outputs/tables/
...q3_impact_analysis_coeffs.csv]

  D4 --> T4[outputs/tables/
...q4_new_system_metrics.csv]
```

**Paper placement**:
- Methods (Data): show what is derived from the official file and what is *not*.
- Reproducibility section: show deterministic artifact paths.

---

### Fig 0-2: Q0 auditing & sanity checks

```mermaid
flowchart LR
  A[Official data
2026_MCM_Problem_C_Data.csv] --> B[Q0 preprocessing]

  B --> P1[data/processed/dwts_weekly_panel.csv]
  B --> P2[data/processed/dwts_season_features.csv]

  B --> S1[outputs/tables/
mcm2026c_q0_sanity_season_week.csv]
  B --> S2[outputs/tables/
mcm2026c_q0_sanity_contestant.csv]

  A --> R1[Raw audit summary
outputs/tables/raw_audit_summary.csv]
```

**What this supports in the paper**:
- “We did not manually edit results.”
- “The weekly panel is internally consistent (e.g., score shares sum to 1).”

---

## Mainline evidence tables (for the paper body)

- `outputs/tables/mcm2026c_q0_sanity_season_week.csv`
- `outputs/tables/mcm2026c_q0_sanity_contestant.csv`
- `outputs/tables/raw_audit_summary.csv`

---

## Narrative / argument mainline (recommended)

- Start with **Fig 0-1** to define “what is produced where”.
- Use **Fig 0-2** to justify that downstream inference (Q1–Q4) is based on audited, canonical datasets.

---

## Appendix / showcase (optional)

No showcase diagrams are required for Q0.
